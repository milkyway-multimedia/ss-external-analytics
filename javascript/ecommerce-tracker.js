!function(e){var r=function(r,o,n,t){function c(e,o,n){if(r.ecommerceTriggers.hasOwnProperty(e)){n&&n.constructor===Array||(n=n?[n]:o._except||[]);for(var t in r.ecommerceTriggers[e])r.ecommerceTriggers[e].hasOwnProperty(t)&&n.indexOf(t)===-1&&r.ecommerceTriggers[e][t].call(this,o)}}null==o&&"function"==typeof require&&(o=require("jquery")),!n&&e.event?n=e.event:n||"function"!=typeof require||(n=require("./events.js")(o,t,r)),!t&&e.conversion?t=e.conversion:t||(n?t=n.prototype.getConversion():"function"==typeof require&&(t=require("./conversions.js")(r?r.conversion:r,o,n))),r||(r=e),r.hasOwnProperty("ecommerceTriggers")||(r.ecommerceTriggers={}),e.ecommerce={impression:function(r,o){return c("impression",r,o),e},viewedProductDetails:function(r,o){return c("viewedProductDetails",r,o),e},choseProduct:function(r,o){return c("choseProduct",r,o),e},addToCart:function(r,o){return c("addToCart",r,o),e},removeFromCart:function(r,o){return c("removeFromCart",r,o),e},currency:function(r,o){return c("currency",r,o),e},step:function(r,o){return c("step",r,o),e},promo:function(r,o){return c("promo",r,o),e},transaction:function(r,o){return c("transaction",r,o),e},refund:function(r,o){return c("refund",r,o),e}},e.ecommerce.setEvent=function(r){return n=r,e},e.ecommerce.setConversion=function(r){return t=r,e};var i=[];if(r.hasOwnProperty("shop")){var u,s,m,f,a,d,p=function(r,c,i,u){"immediately"!==c&&isNaN(c)?(i=i?"once":"on",w[i](c,function(){e.ecommerce[u](r),t&&r.hasOwnProperty("_trackConversion")&&t(o.extend({},r._defaults||{},r._trackConversion)),n&&r.hasOwnProperty("_trackEvent")&&n(o.extend({},r._defaults||{},r._trackEvent))})):(setTimeout(function(){e.ecommerce[u](r)},2e3),t&&r.hasOwnProperty("_trackConversion")&&setTimeout(function(){t(o.extend({},r._defaults||{},r._trackConversion))},2e3),n&&r.hasOwnProperty("_trackEvent")&&setTimeout(function(){n(o.extend({},r._defaults||{},r._trackEvent))},2e3))};for(u in r.shop)if(r.shop.hasOwnProperty(u)){d=r.shop[u].action||"impression",m=r.shop[u].events||[u],f=r.shop[u].element||window,a=r.shop[u].once||!1,"window"===f?f=window:"document"===f&&(f=document);var w=o(f);for(s=0;s<m.length;s++)i.indexOf(u+":"+m[s])===-1&&(i.push(u+":"+m[s]),p(r.shop[u],m[s],a,d))}}return o(window).trigger("EA:js::ecommerce",[e.ecommerce,e]),e.ecommerce};"object"==typeof module&&"object"==typeof module.exports&&e===module.exports?module.exports=r:(window.EA=e,window.EA.ecommerce=r(null,window.jQuery||window.Zepto||window.Sprint||(window.mwm&&mwm.jquery?mwm.jquery:null),e.event||null,e.conversion||null))}("object"==typeof module&&"object"==typeof module.exports?module.exports:window.EA||{});